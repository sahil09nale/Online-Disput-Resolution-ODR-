<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - ResolveNOW</title>
    <link rel="stylesheet" href="../styles.css">
    <script src="../js/auth.js"></script>
    <script src="../js/dashboard.js" defer></script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="../index.html"><h2>ResolveNOW</h2></a>
            </div>
            <div class="nav-menu">
                <span id="userWelcome" style="color: var(--medium-gray); font-weight: 500;">
                    Welcome, <span id="userName">User</span>
                </span>
                <a href="submit-dispute.html" class="btn-primary">New Case</a>
                <a href="profile.html">Profile</a>
                <a href="#" onclick="logout()" class="btn-secondary">Sign Out</a>
            </div>
        </div>
    </nav>

    <div class="dashboard">
        <div class="dashboard-header">
            <div>
                <h1>Dashboard</h1>
                <p style="color: var(--medium-gray); margin-top: 8px;">Manage your cases and track resolution progress</p>
            </div>
            <div style="display: flex; gap: 12px; align-items: center;">
                <button id="refreshBtn" class="btn-secondary" style="padding: 8px 16px;">üîÑ Refresh</button>
                <a href="submit-dispute.html" id="submitCaseBtn" class="btn-primary">Submit New Case</a>
            </div>
        </div>

        <!-- Loading and Error Elements -->
        <div id="dashboardLoading" style="display: none; text-align: center; padding: 40px;">
            <div style="font-size: 48px; margin-bottom: 16px;">‚è≥</div>
            <div>Loading dashboard data...</div>
        </div>
        
        <div id="dashboardError" style="display: none; background: #fee; color: #c33; padding: 16px; border-radius: 6px; margin: 20px 0; border: 1px solid #fcc;">
            Error loading data
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number" id="totalCases">0</div>
                <div>Total Cases</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="activeCases">0</div>
                <div>Active Cases</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="resolvedCases">0</div>
                <div>Resolved Cases</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="pendingCases">0</div>
                <div>Pending Review</div>
            </div>
        </div>

        <div class="cases-table">
            <div style="padding: 24px 24px 0;">
                <h3>Recent Cases</h3>
                <p style="color: var(--medium-gray); margin-top: 4px; font-size: 14px;">Track and manage your dispute resolution cases</p>
            </div>
            <table id="recentCasesTable">
                <thead>
                    <tr>
                        <th>Case ID</th>
                        <th>Case Title</th>
                        <th>Type</th>
                        <th>Status</th>
                        <th>Date Filed</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="6" style="text-align: center; padding: 48px 24px; color: var(--medium-gray);">
                            <div style="font-size: 48px; margin-bottom: 16px; opacity: 0.5;">üìã</div>
                            <div style="font-size: 16px; font-weight: 500; margin-bottom: 8px;">No cases found</div>
                            <div style="font-size: 14px;">
                                <a href="submit-dispute.html" style="color: var(--teal); text-decoration: none; font-weight: 500;">Submit your first case</a> to get started
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div id="mediatorSection" style="display: none; margin-top: 40px;">
            <div class="cases-table">
                <div style="padding: 24px 24px 0;">
                    <h3>Mediation Queue</h3>
                    <p style="color: var(--medium-gray); margin-top: 4px; font-size: 14px;">Cases assigned for your mediation expertise</p>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Case ID</th>
                            <th>Parties Involved</th>
                            <th>Dispute Type</th>
                            <th>Priority Level</th>
                            <th>Assigned Date</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="mediationCasesBody">
                        <tr>
                            <td colspan="6" style="text-align: center; padding: 48px 24px; color: var(--medium-gray);">
                                <div style="font-size: 48px; margin-bottom: 16px; opacity: 0.5;">üë•</div>
                                <div style="font-size: 16px; font-weight: 500; margin-bottom: 8px;">No mediation cases assigned</div>
                                <div style="font-size: 14px;">Cases will appear here when assigned to you</div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="lawyerSection" style="display: none; margin-top: 40px;">
            <div class="cases-table">
                <div style="padding: 24px 24px 0;">
                    <h3>Client Cases</h3>
                    <p style="color: var(--medium-gray); margin-top: 4px; font-size: 14px;">Cases where you're providing legal representation</p>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Case ID</th>
                            <th>Client Name</th>
                            <th>Dispute Type</th>
                            <th>Case Value</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="lawyerCasesBody">
                        <tr>
                            <td colspan="6" style="text-align: center; padding: 48px 24px; color: var(--medium-gray);">
                                <div style="font-size: 48px; margin-bottom: 16px; opacity: 0.5;">‚öñÔ∏è</div>
                                <div style="font-size: 16px; font-weight: 500; margin-bottom: 8px;">No client cases</div>
                                <div style="font-size: 14px;">Client cases will appear here when you're assigned as legal counsel</div>
                            </td>
                        </tr>
                </table>
            </div>
        </div>
    </div>
</body>
</html>